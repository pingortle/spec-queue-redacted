<template name="build">
  <h1>Build <small>{{ resource.status }}</small></h1>
  {{#if resource.gitCommitId }}
    <h2>Git Commit: {{ resource.gitCommitId }}</h2>
  {{/if }}

  <button class="btn btn-danger" {{b "click: cancel"}}>Cancel</button>

  <h2>Job Stats</h2>

  <dl>
    {{#each status in jobStatuses}}
      <dt>
        {{ status }}:
      </dt>
      <dd>
        {{countOfJobsWithStatus status }}
      </dd>
    {{/each}}
  </dl>

  <ol>
    {{#each jobsWithStatus "running" }}
      <li>
        <button class="btn btn-xs btn-danger" {{b "click: failJob(this)"}}>Restart</button>
        {{ toFixed progress.percent 2 }}% - job id: <code>{{ _id }}</code> - job metadata: <code>{{ stringify data }}</code>
      </li>
    {{/each}}
  </ol>

  <h2>Examples</h2>
  <dl>
    {{#each status in exampleStatuses}}
      <dt>
        {{ status }}:
      </dt>
      <dd>
        {{countOfExamplesWithStatus status }}
      </dd>
    {{/each}}
  </dl>

  {{#if (countOfExamplesWithStatus "failed")}}<h3>Failures</h3>{{/if}}
  {{#each (pp (examplesWithStatus "failed")) }}
    <pre>
      {{ . }}
    </pre>
  {{/each}}
</template>
